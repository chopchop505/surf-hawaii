<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>

    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script src="http://e.cdn-surfline.com/global_includes/jwplayer/6.9/jwplayer.js"></script>
<script> jwplayer.key="YS4xpgH6/2TvlkxzmcyourFpS9w0jKSbd8cRcA==";</script>
<script src="http://e.cdn-surfline.com/global_includes/jwplayer/6.9/jwplayer.html5.js"></script>
<script type="text/javascript" src="http://e.cdn-surfline.com/scripts/swfobject2/swfobject.js"></script>

    <script type="text/javascript">


// sudo tcpdump -A -n -s 0 -r file.tcpdump | grep  m3u8



function newone(cameraStream) {

    jwplayer("player").setup({
        file: cameraStream
    });


/*

"http://livestream.cdn-surfline.com/cdn-live/_definst_/surfline/secure/live/wc-morrocam.smil/playlist.m3u8?e=1414795371&h=18de13353e97a86f59bdc4b46c819291"


http://livestream.cdn-surfline.com/cdn-live/_definst_/surfline/secure/live/wc-morrocam.smil/playlist.m3u8?e=1414795371&h=18de13353e97a86f59bdc4b46c819291"
*/


    /**
    jwplayer("player").setup({
        flashplayer: "/newplayer.swf",
        file:cameraStream,
        width:640,
        height:360,
        autostart: true
    });*/

}

    function setFile(rtmp_file) {
        jwplayer("player").setup({
            bufferlength: 1,
            autostart: true,
            stretching: 'exactfit',
            streamer:'rtmp://livestream.cdn-surfline.com/cdn-live-s3',
            flashplayer: "/jwplayer.swf",
            file: rtmp_file,
            icons: true,
            height: "100%",
            width: "100%",
            events: {
              onBuffer: function(evt){
                console.log('JWPlayer is buffering');
              },
              onError: function(evt){
                console.log('JWPlayer caught an error');
              }
            }
        })
    }



jQuery(function(){
    jQuery.ajax({
        url:"http://api.surfline.com/v1/cams/5065",
        type: "GET",
        dataType: "jsonp",
        success : function(responseData){

                console.log(responseData)
                var data = responseData.streamInfo.stream[0];
                newone(data.file);
        },

        error : function(err){
             console.log("ERR", err);
        }
    });

/*
    jQuery.ajax({
        url:"http://api.surfline.com/v1/cams/4193",
        type: "GET",
        dataType: "jsonp",
        success : function(responseData){

                console.log(responseData)
                var data = responseData.streamInfo.stream[0];
                newone(data.file);
        },

        error : function(err){
             console.log("ERR", err);
        }
    });

*/
});

    </script>

  </head>
<body>
Preset RTMP Streams:
<a href="#" onclick="newone('http://livestream.cdn-surfline.com/cdn-live/_definst_/surfline/secure/live/wc-pismocam.smil/chunklist_w1374658465_b600000.m3u8?e=1414795521&h=2c07e1c62271874899671aa09357d230'); return false;">Pismo</a>
<a href="#" onclick="newone('http://livestream.cdn-surfline.com/cdn-live/_definst_/surfline/secure/live/wc-morrocam.smil/playlist.m3u8?e=1414795371&h=18de13353e97a86f59bdc4b46c819291'); return false;">Morro</a>


<div id="player"> </div>

</body>

</html>
